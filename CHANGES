=== 0.4 ===
2011-04-28  Aki Sasaki  <aki@mozilla.com>

* test/test_base_script.py:
    Added test_chmod method.
    Renamed TestSummary to TestScriptLogging.

* mozharness/base/script.py (OSMixin.chown): Removed method.
    I can't see using it as a non-root user; as a root user we'll need to sudo.

* mozharness/base/script.py (OSMixin.chmod):
    Fixed logging.

* scripts/configtest.py:
    Ignore test_malformed* config files.

* configs/test/test_malformed.json: Added file.

* configs/test/test_malformed.py: Added file.

* mozharness/base/config.py (parse_config_file):
    Fixed python config files.
    Raise assertion if config file does not end in .json or .py.
    Raise assertion if config file is not found.

* test/test_base_config.py:
    TestJsonConfig -> TestParseConfigFile.
    Added python config file tests, illegal/malformed config file checking.

* configs/test/test.py: Added file.

* mozharness/l10n/locales.py (LocalesMixin.query_locales):
    Fixed some borked logic.

* mozharness/l10n/locales.py (LocalesMixin.parse_locales_file):
    Removed duplicate ignore_locales logic that should be handled in query_locales.

* test/helper_files/locales.json: Added file.

* test/helper_files/locales.txt: Added file.

* test/test_l10n_locales.py: Added file.

* test/*: Renamed to match directory structure.

2011-04-27  Aki Sasaki  <aki@mozilla.com>

* test/networked/test_script.py: Added file.

* test/test_script.py (TestHelperFunctions.test_download_file): Removed method.

* unit.sh:
    Added a separate networked/non-networked call to nosetests.  In the future, we should add an option to skip the network tests.

* mozharness/base/vcs/hgtool.py: Created softlink -> sourcetool.py.

* mozharness/base/vcs/sourcetool.py:
    Was able to test a successful |sourcetool.py repo|, as well as a |sourcetool.py -s shared_dir repo|.
    Created ability to change the default VCS by looking at the filename (softlink to hgtool.py and it'll use hg by default; softlink to gittool.py and it'll use git when we enable it. I also see potential svntool.py and cvstool.py at some point.)

* mozharness/base/vcs/sourcetool.py (SourceTool._pre_config_lock):
    Verified that self.config['vcs'] is set; else self.fatal()

* mozharness/base/vcs/sourcetool.py (SourceTool.source):
    Cleaned up old TODO comments

* mozharness/base/vcs/mercurial.py:
    Worked through the various scenarios in sourcetool.py; fixing bugs.

2011-04-26  Aki Sasaki  <aki@mozilla.com>

* scripts/sourcetool.py: Moved from scripts/hgtool.py.

* test/test_log.py (TestLog.test_console_log): Removed method.
    Coverage didn't change at all (console logging is tested in test_script.py) but we removed a spurious line of output from unit.sh.

* mozharness/base/log.py (LogMixin.warn): Removed method.
    Also removed references to it.

* mozharness/base/script.py (ShellMixin.get_output_from_command):
    fixed the NamedTemporaryFile issue between 2.5 and 2.6, by allowing you to name your own tmpfile if you want to munge the contents later.

* mozharness/base/script.py (BaseScript):
    Pulled all os and shell methods out to mixins.

* mozharness/base/vcs/mercurial.py (MercurialVCS): Added class.
    This will hopefully be a standalone object that takes the baseScript log_obj and perhaps config, but will allow for multiple VCS objects per BaseScript.
    First pass: changed standalone functions to a MercurialVCS object.

2011-04-25  Aki Sasaki  <aki@mozilla.com>

* mozharness/base/log.py (BaseLogger.log_message): Renamed from log() to be compatible with LogMixin.

* mozharness/base/log.py (LogMixin): New class.
    Pull the generic logging methods from BaseScript to this new class.
    This is specifically to allow for non-BaseScript objects to use the log_obj from BaseScript (set a LogMixin's self.log_obj to the logging object)

* mozharness/base/script.py (BaseScript):
    Pull the generic logging methods from BaseScript to a new LogMixin class.
    Change BaseScript to inherit LogMixin by default.

* mozharness/base/config.py (BaseConfig.parse_args):
    Fixed the args list sent to parse_args (sys.argv[1:])
    Set self.options and self.args after parse_args for later access in BaseScript._pre_config_lock

* mozharness/base/config.py (ExtendedOptionParser):
    Removed self.variables hack and add_option override.

* mozharness/base/script.py (__init__):
    Added a _pre_config_lock() call before _config_lock() to allow for things like hgtool reading the buildprops json into self.config.
    Moved --simple-log and --multi-log options to mozharness.base.config._create_config_parser.

* mozharness/base/script.py (_config_lock):
    Renamed to match _pre_config_lock (was _lock_config).

* mozharness/base/config.py (_create_config_parser):
    Allow for --ACTION to do the same thing as --only-ACTION.
    Added action and logging OptionGroups.
    Moved --simple-log and --multi-log options here.
    Disable noop option argument.
    Removed dependency on config_parser.variables (config_parser.defaults.keys() gives the same info).

    The noop option disable forced a change of s,self.config['noop'],self.config.get('noop'), throughout mozharness.

* scripts/hgtool.py: New file.

* CHANGES: New file.

* TODO: New file.

* mozharness/__init__.py: Bumped version to 0.4.

2011-04-21  Aki Sasaki  <aki@mozilla.com>

* mozharness/base/script.py (MercurialMixin, MercurialScript):
    Moved to mozharness/base/vcs/mercurial.py.
    Adjusted other files accordingly.

* mozharness/base/script.py (BaseScript.dump_exception): New function.

* mozharness/base/script.py (BaseScript.copyfile):
    Adjusted to use dump_exception and a tighter try/except.

* mozharness/base/config.py, script.py, scripts/configtest.py, test/*:
    Switched simplejson/json import order, as simplejson is faster.

=== 0.3 and before are non-changelogged. ===
